language: cpp
before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
install:
  - sudo apt-get install -y libvtk5-dev libvtk5.8
  - sudo apt-get install -qq gcc-4.8 g++-4.8
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 90
compiler:
  - gcc
# Change this to your needs
script:
  - export SOURCE_ROOT=$PWD
  - git clone https://github.com/opesci/Pochoir.git
  - pushd Pochoir
  - mkdir build
  - pushd build
  - cmake -DCMAKE_INSTALL_PREFIX=$SOURCE_ROOT/pochoir-install ../
  - make install
  - export PATH=$SOURCE_ROOT/pochoir-install:$PATH
  - popd; popd
  - mkdir build
  - cd build
  - cmake ..
  - make VERBOSE=1
  - git clone https://github.com/opesci/data.git  
  - cd tests/
  - for file in ../data/*.gz ; do gunzip -c $file > $(basename $file .gz) ; done
  - make VERBOSE=1
  - make test

