language: python
python:
    - "2.7"

before_install:
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-get update -qq
    - sudo apt-get install -y libvtk5-dev libvtk5.8
    - sudo apt-get install -qq gcc-4.8 g++-4.8

install:
    - pip install -r requirements.txt
    - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 90
    - python setup.py build_clib --build-clib=`pwd`

script:
    - export PYTHONPATH=`pwd`:$PYTHONPATH
    - flake8 opesci
    - flake8 tests
    - py.test tests
    - python tests/eigenwave3d.py
    - python tests/eigenwave3d.py read
    - python tests/eigenwave3d.py vtk
    - tests/src/eigenwave3d
