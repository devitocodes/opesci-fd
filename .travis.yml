language: python
python:
    - "2.7"

before_install:
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-get update -qq
    - sudo apt-get install -y libvtk5-dev libvtk5.8
    - sudo apt-get install -qq gcc-4.8 g++-4.8

install:
    - pip install -r requirements.txt
    - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 90

script:
    - export PYTHONPATH=`pwd`:$PYTHONPATH
    - python codegen/grid3d.py
    - python codegen/grid3d.py read
    - python codegen/grid3d.py vtk
    - mkdir codegen/build
    - cd codegen/build
    - cmake ../src
    - make
    - bin/test_grid3d
